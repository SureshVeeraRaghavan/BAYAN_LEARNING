<div class="flex bg-white h-screen bg-[#fafafa] font-sans"
     [ngClass]="{ 'flex-row-reverse': isRTL }">

  <!-- SIDEBAR -->
  <aside
    [ngClass]="[
      open ? 'w-60' : 'w-17',
      isRTL ? 'right-0' : 'left-0'
    ]"
    class="h-full borderbackground fixed bg-white transition-all duration-300"
  >
    <div class="flex items-center justify-between px-4 py-4">
      <img *ngIf="open" src="assets/lmslogo.png" class="w-18 h-25" />

      <button
        (click)="toggleSidebar()"
        class="rounded-md bg-black text-white p-2 hover:opacity-80 transition"
      >
        <i [ngClass]="open ? 'fa fa-chevron-left' : 'fa fa-chevron-right'"></i>
      </button>
    </div>

    <nav class="mt-1">
      <ul class="space-y-0">
        <li *ngFor="let item of filteredNavigation">
          <a
            [routerLink]="item.href"
            routerLinkActive="bg-blue-100 text-blue-600"
            [routerLinkActiveOptions]="{ exact: item.key ==='home' }"
            class="nav-link flex items-center gap-3 px-6 py-2 rounded-lg transition"
          >
            <i [ngClass]="item.icon" class="icon text-[17px] w-6"></i>

       <span *ngIf="open" class="label text-[13px] font-medium">
  {{ labels[selectedLang][item.key] }}

</span>

          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- MAIN AREA -->
  <div
    class="flex-1 flex flex-col transition-all duration-300"
    [style.marginLeft.px]="!isRTL ? (open ? 256 : 80) : 0"
    [style.marginRight.px]="isRTL ? (open ? 256 : 80) : 0"
  >
    <!-- HEADER -->
    <header class="w-full px-6 pt-4 mt-6">
  <div class="flex items-center justify-between pb-3 h-15">

    <!-- Search Bar -->
    <div class="w-[430px]">
      <div class="flex items-center bg-white border border-gray-300 rounded-lg px-4 py-[10px] shadow-sm">
        <i class="fas fa-search text-gray-400 text-[14px] mr-3"></i>
        <input
          type="text"
          placeholder="Search courses, topics, or skills..."
          class="w-full text-[14px] placeholder-gray-400 focus:outline-none"
        />
      </div>
    </div>

    <!-- RIGHT SIDE ICONS + NEW BUTTONS -->
    <div class="flex items-center gap-3">

      <!-- Join Meeting Button -->
      <button
        (click)="joinMeeting()"
        class="px-2 py-1 bg-gray-200 text-black  rounded-lg flex items-center gap-2
               justify-center text-[14px] font-semibold tracking-wide border border-gray-100 hover:border-blue-500 
                transition-all duration-200   cursor-pointer"
      >
        <i class="fa fa-video-camera"></i>
        <span>Join Meeting</span>
      </button>

      <!-- Schedule Meeting Button -->
      <button
        (click)="scheduleMeeting()"
        class="px-5 py-1 bg-gray-200 text-black rounded-lg flex items-center gap-2
               justify-center text-[14px] font-semibold border border-gray-100 hover:border-blue-500 tracking-wide
                transition-all duration-200  cursor-pointer"
      >
        <i class="fa fa-video-camera"></i>
        <span>Schedule Meeting</span>
      </button>

      <!-- Normal Icons -->
      <button class="w-9 h-9 bg-gray-200 rounded-md flex items-center justify-center">
        <i class="fas fa-bell text-black text-[13px]"></i>
      </button>

      <!-- Language -->
      <div class="relative">
        <button
          class="w-9 h-9 bg-gray-200 rounded-md flex items-center justify-center"
          (click)="toggleLangDropdown()"
        >
          <i class="fas fa-globe text-black text-[13px]"></i>
        </button>

        <div *ngIf="showLangDropdown"
          class="absolute right-0 mt-2 w-32 bg-white border shadow-lg rounded-md py-2 z-50">

          <button class="w-full text-left px-3 py-1 hover:bg-gray-100" (click)="changeLanguage('en')">English</button>
          <button class="w-full text-left px-3 py-1 hover:bg-gray-100" (click)="changeLanguage('ta')">தமிழ்</button>
          <button class="w-full text-left px-3 py-1 hover:bg-gray-100" (click)="changeLanguage('hi')">हिन्दी</button>
          <button class="w-full text-left px-3 py-1 hover:bg-gray-100" (click)="changeLanguage('ar')">العربية</button>

        </div>
      </div>

      <!-- Theme -->
      <button
        (click)="toggleTheme()"
        class="w-9 h-9 bg-gray-200 rounded-md flex items-center justify-center"
      >
        <i [ngClass]="isDark ? 'fas fa-moon' : 'fas fa-sun'" class="text-black text-[13px]"></i>
      </button>

      <!-- User -->
      <div class="relative">
        <button
          (click)="toggleUserDropdown()"
          class="w-9 h-9 rounded-full"
        >
          <img src="assets/profilee.jpg" class="w-9 h-9 rounded-full object-cover" />
        </button>
        <div *ngIf="showUserDropdown"
          class="absolute right-0 mt-2 w-64 bg-white border shadow-lg rounded-md py-2 z-50">

          <div class="px-4 py-3 border-b border-gray-200">
            <div class="flex items-center gap-3">
              <img src="assets/profilee.jpg" class="w-9 h-9 rounded-full" />

              <div class="flex-1 min-w-0">
                <p class="text-sm font-semibold truncate">{{ getUserName() }}</p>
                <p class="text-xs truncate">{{ getUserEmail() }}</p>
              </div>
            </div>

            <div class="mt-2">
              <span class="inline-block px-2 py-1 text-xs font-medium rounded-full"
                [ngClass]="{
                  'bg-blue-100 text-blue-800': getUserRole() === 'USER',
                  'bg-purple-100 text-purple-800': getUserRole() === 'ADMIN',
                  'bg-green-100 text-green-800': getUserRole() === 'INSTRUCTOR'
                }">
                {{ getUserRole() }}
              </span>
            </div>
          </div>
          <div class="py-1">
            <button (click)="goToProfile()" class="w-full px-4 py-2 hover:bg-gray-100 text-sm flex items-center gap-3">
              <i class="fa fa-user"></i> <span>Profile</span>
            </button>

            <div class="border-t my-1"></div>

            <button (click)="logout()" class="w-full px-4 py-2 hover:bg-gray-100 text-sm flex items-center gap-3 text-red-600">
              <i class="fa fa-sign-out-alt"></i> <span>Logout</span>
            </button>
          </div>

        </div>
      </div>

    </div>
  </div>

  <div class="border-b border-gray-200"></div>
</header>


    <main class="flex-1   bg-white p-6">
      <router-outlet></router-outlet>
    </main>

  </div>
</div>
